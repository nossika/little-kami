webpackJsonp([1],{125:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(59),l=o(i),r=n(40),u=o(r),f=n(41),s=o(f),a=function(){function e(t){(0,u.default)(this,e),this.type=t,this.color="",this.line="",this._linkNodes=new l.default}return(0,s.default)(e,[{key:"link",value:function(){var t=this;if(this.type){for(var n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.filter(function(t){return t&&t instanceof e&&t.type}).forEach(function(e){t._linkNodes.has(e)||(t._linkNodes.add(e),e._linkNodes.add(t))})}}},{key:"unlink",value:function(){for(var t=this,n=arguments.length,o=Array(n),i=0;i<n;i++)o[i]=arguments[i];o.filter(function(t){return t&&t instanceof e&&t.type}).forEach(function(e){t._linkNodes.delete(e),e._linkNodes.delete(t)})}}]),e}();t.default=a},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultLines={1:"rgba(183,235,143,.15)",2:"rgba(145,213,255,.15)",3:"rgba(255,229,143,.15)",4:"rgba(255,163,158,.15)"},t.defaultColors={1:"#f6ffed",2:"#e6f7ff",3:"#fffbe6",4:"#fff1f0"}},64:function(e,t,n){"use strict";var o=n(65),i=document.querySelector("#canvas"),l=void 0;[].slice.call(document.querySelectorAll("#colors [data-color]")).forEach(function(e){e.addEventListener("click",function(t){l=+e.dataset.color,console.log("curColor",l)})}),document.querySelector("#colors [data-color]").click();var r=[[1,1,1,3,1,1,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,3,3,1,1,1,1,1,1,1],[3,1,3,1,1,1,2,1,1,1],[1,1,1,1,1,2,2,1,1,1],[1,1,3,1,2,2,2,1,1,1],[1,1,3,1,1,2,1,1,1,1],[1,1,3,0,0,1,1,1,1,1],[1,1,3,0,0,0,1,1,1,1],[1,1,1,1,0,0,1,1,1,1],[1,1,1,1,2,2,2,4,4,1],[1,1,1,1,1,2,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1],[1,1,1,1,2,2,2,1,1,1],[1,1,1,1,1,2,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,3,1,1,1,1,1,1,1],[1,1,1,1,1,1,1,1,1,1]],u=new o({grids:r});u.mount(i),i.addEventListener("click",function(e){var t=u.getNodeByOffset(e.offsetX/i.offsetWidth,e.offsetY/i.offsetHeight);u.tap(t,l,{onEnd:function(e){console.log(e),e&&alert("win")},delay:100})}),console.log(u)},65:function(e,t,n){"use strict";var o=n(66),i=function(e){return e&&e.__esModule?e:{default:e}}(o);e.exports=i.default},66:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(22),l=o(i),r=n(83),u=o(r),f=n(40),s=o(f),a=n(41),d=o(a),c=n(90),h=o(c),v=n(91),y=o(v),_=n(99),p=o(_),g=function(e){function t(){return(0,s.default)(this,t),(0,h.default)(this,(t.__proto__||(0,u.default)(t)).apply(this,arguments))}return(0,y.default)(t,e),(0,d.default)(t,[{key:"mount",value:function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n.colors,i=n.lines;this._canvas=e,o=o||this._colors||t.defaultColors,i=i||this._lines||t.defaultLines,this.setStyles({colors:o,lines:i}),this.render()}},{key:"setStyles",value:function(e){var t=this,n=e.node,o=e.colors,i=e.lines;this._colors=o||this._colors,this._lines=i||this._lines,n?(n.color=this._colors[n.type]||"",n.line="object"===(0,l.default)(this._lines)?this._lines[n.type]:n.type?this._lines:""):this.nodeGrids.forEach(function(e){e.forEach(function(e){e.color=t._colors[e.type]||"",e.line="object"===(0,l.default)(t._lines)?t._lines[e.type]:e.type?t._lines:""})})}},{key:"render",value:function(){if(this._canvas){var e=this.nodeGrids,t=this._canvas,n=t.width,o=t.height,i=t.getContext("2d"),l=e[0].length,r=e.length,u=n/l,f=o/((r-1)/2)/2;i.clearRect(0,0,n,o),e.forEach(function(e,t){e.forEach(function(e,n){var o=n+t&1;i.beginPath(),o?(i.moveTo(u*n,f*t),i.lineTo(u*(n+1),f*(t-1)),i.lineTo(u*(n+1),f*(t+1)),i.lineTo(u*n,f*t)):(i.moveTo(u*n,f*(t-1)),i.lineTo(u*(n+1),f*t),i.lineTo(u*n,f*(t+1)),i.lineTo(u*n,f*(t-1))),i.fillStyle=e.color,e.color&&i.fill(),i.strokeStyle=e.line,e.line&&i.stroke(),i.closePath()})})}}},{key:"getNodeByOffset",value:function(e,t){var n=1/this.nodeGrids[0].length,o=1/(this.nodeGrids.length-1),i=e/n|0,l=e/n-i,r=t/o|0,u=1-(t/o-r),f=i+r&1?1-l<u:l<u,s=i,a=f?r:r+1;return this.nodeGrids[a][s]}}]),t}(p.default);t.default=g},99:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i,l,r=n(100),u=o(r),f=n(59),s=o(f),a=n(116),d=o(a),c=n(122),h=o(c),v=n(40),y=o(v),_=n(41),p=o(_),g=n(125),k=o(g),b=n(126),E=(l=i=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.canvas,o=t.grids,i=t.colors,l=void 0===i?e.defaultColors:i,r=t.lines,u=void 0===r?e.defaultLines:r;(0,y.default)(this,e);var f=o.map(function(e){return e.map(function(e){return new k.default(e)})});(0,h.default)(f,{getNode:{value:function(e,t){return this[t]&&this[t][e]||null},enumerable:!1}}),f.forEach(function(e,t){e.forEach(function(e,n){e.link(f.getNode(n,t-1),f.getNode(n,t+1),f.getNode(n+(n+t&1?1:-1),t))})}),this.nodeGrids=f,n&&this.mount(n,{colors:l,lines:u})}return(0,p.default)(e,[{key:"tap",value:function(e,t){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.delay,l=o.onEnd,r=e.type,f=new d.default,a=new s.default([e]);!function e(){var o=new s.default;a.forEach(function(e){f.add(e),e.type=t,"function"==typeof n.setStyles&&n.setStyles({node:e});var i=!0,l=!1,s=void 0;try{for(var a,d=(0,u.default)(e._linkNodes);!(i=(a=d.next()).done);i=!0){var c=a.value;f.has(c)||c.type!==r||o.add(c)}}catch(e){l=!0,s=e}finally{try{!i&&d.return&&d.return()}finally{if(l)throw s}}}),a=o,a.size?i?(i=i/10*9,"function"==typeof n.render&&n.render(),setTimeout(e,i)):e():("function"==typeof n.render&&n.render(),l&&l(n.checkConsistency()))}()}},{key:"checkConsistency",value:function(){var e=void 0,t=!0,n=!1,o=void 0;try{for(var i,l=(0,u.default)(this.nodeGrids);!(t=(i=l.next()).done);t=!0){var r=i.value,f=!0,s=!1,a=void 0;try{for(var d,c=(0,u.default)(r);!(f=(d=c.next()).done);f=!0){var h=d.value;if(e||(e=h.type),h.type&&h.type!==e)return!1}}catch(e){s=!0,a=e}finally{try{!f&&c.return&&c.return()}finally{if(s)throw a}}}}catch(e){n=!0,o=e}finally{try{!t&&l.return&&l.return()}finally{if(n)throw o}}return!0}}]),e}(),i.defaultLines=b.defaultLines,i.defaultColors=b.defaultColors,l);t.default=E}},[64]);
//# sourceMappingURL=main.662fd8321cef74819909.js.map